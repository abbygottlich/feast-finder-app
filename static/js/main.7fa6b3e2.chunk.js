(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){e.exports=a(215)},127:function(e,t,a){},128:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var n=a(92),r=a(0),s=a.n(r),i=a(9),o=a.n(i),c=(a(127),a(11)),l=a(12),u=a(14),m=a(13),d=a(15),h=(a(128),a(68)),g=a(24),p=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={username:"",password:"",confirmPassword:""},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSignUp({username:this.state.username,password:this.state.password,confirmPassword:this.state.confirmPassword})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSubmit.bind(this)},s.a.createElement("div",{className:"title"},"Sign Up"),s.a.createElement("input",{type:"email",name:"username",placeholder:"Username",className:"username-input",onChange:function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},value:this.state.username}),s.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"password-input",onChange:function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},value:this.state.password}),s.a.createElement("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",className:"confirm-password-input",onChange:function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},value:this.state.confirmPassword}),s.a.createElement("button",{className:"login-button",type:"submit"},"Sign Up"))}}]),t}(r.Component),v=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={username:"",password:""},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSignIn({username:this.state.username,password:this.state.password})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSubmit.bind(this)},s.a.createElement("div",{className:"title"},"Sign In"),s.a.createElement("input",{type:"email",name:"username",placeholder:"Username",className:"username-input",onChange:function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},value:this.state.username}),s.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"password-input",onChange:function(t){e.setState(Object(g.a)({},t.target.name,t.target.value))},value:this.state.password}),s.a.createElement("button",{className:"login-button",type:"submit"},"Sign In"))}}]),t}(r.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderError",value:function(){return s.a.createElement(h.a,{bsStyle:"danger"},s.a.createElement("strong",null,this.props.error))}},{key:"render",value:function(){return s.a.createElement(h.c,null,s.a.createElement(h.b,{xs:8},this.props.error&&this.renderError(),s.a.createElement("div",{className:"login-page"},s.a.createElement("div",{className:"welcome"},s.a.createElement("div",{className:"logo"}),s.a.createElement("div",{className:"welcome-text"},"Welcome to Feast Finder!")),s.a.createElement("div",{className:"login-sections"},s.a.createElement("div",{className:"signin-section"},s.a.createElement(v,{onSignIn:this.props.onSignIn})),s.a.createElement("div",{className:"signup-section"},s.a.createElement(p,{onSignUp:this.props.onSignUp}))))))}}]),t}(r.Component),b=a(31),E=a(43),S=a(20),O="RESTAURANT_SUCCESS",j=a(51),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){return function(t){var n=t.target.value;a.setState(Object(g.a)({},e,n))}},a.state={city:"",USstate:"",returnedRestaurant:[],toggle:!1,menuIcon:"menu"},a.handleChange=a.handleChange.bind(Object(S.a)(Object(S.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(S.a)(Object(S.a)(a))),a.restaurantResult=a.restaurantResult.bind(Object(S.a)(Object(S.a)(a))),a.toggleHandler=a.toggleHandler.bind(Object(S.a)(Object(S.a)(a))),a.showMenu=a.showMenu.bind(Object(S.a)(Object(S.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"restaurantResult",value:function(e){return{type:"RESTAURANT_RESULT",restaurantData:e}}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.fetchRestaurants(this.state.city,this.state.USstate)}},{key:"toggleHandler",value:function(){!1===this.state.toggle?this.setState({toggle:!0,menuIcon:"x"}):this.setState({toggle:!1,menuIcon:"menu"})}},{key:"showMenu",value:function(){return!0===this.state.toggle?s.a.createElement("div",{className:"menu-block"},s.a.createElement(b.b,{to:"/favorites",className:"my-favorites-button"},s.a.createElement("div",{className:"menu-text"},"My Favorites")),s.a.createElement(b.b,{to:"/dislikes",className:"my-dislikes-button"},s.a.createElement("div",{className:"menu-text"},"My Dislikes")),s.a.createElement("div",{className:"sign-out-button"},s.a.createElement("div",{onClick:this.props.onSignOut,className:"menu-text"},"Sign Out"))):null}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"header"},s.a.createElement("div",{class:"logo-white"}),s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit,autoComplete:"off"},s.a.createElement("div",{className:"form-fields"},s.a.createElement("input",{name:"city",value:this.state.city,placeholder:"City",onChange:this.handleChange("city"),className:"city-name"}),s.a.createElement("input",{name:"USstate",value:this.state.USstate,placeholder:"State",onChange:this.handleChange("USstate"),className:"state-name",maxLength:"2"}),s.a.createElement("button",{className:"submit-button",type:"submit"},"Find a Feast!"))),s.a.createElement("button",{className:this.state.menuIcon,onClick:this.toggleHandler})),s.a.createElement("div",null,this.showMenu()))}}]),t}(r.Component),k=Object(j.b)(null,{fetchRestaurants:function(e,t){return function(a){var n="".concat("https://feast-finder.herokuapp.com/","/restaurants/"),r=t.toUpperCase(),s=n+(e+",")+r;a({type:"RESTAURANT_REQUEST"}),fetch(s).then(function(e){return e.json()}).then(function(e){return a({type:O,value:e})}).catch(function(e){return a({type:"RESTAURANT_FAIL"})})}}})(y),N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={restaurantSaved:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"loadRatingButtons",value:function(){var e=this;if(this.props.returnedRestaurant)return s.a.createElement("div",{className:"rating-buttons"},s.a.createElement("img",{onClick:function(){return e.saveRating("like")},className:"like-button",alt:"like-button",src:"https://image.flaticon.com/icons/svg/126/126473.svg"}),s.a.createElement("img",{onClick:function(){return e.saveRating("dislike")},className:"dislike-button",alt:"dislike-button",src:"https://image.flaticon.com/icons/svg/126/126504.svg"}))}},{key:"saveRating",value:function(e){var t=this.props.returnedRestaurant,a={name:t.name,genre:t.categories[0].title,price:t.price,location:t.location.display_address.join(" "),rating:e};fetch("/restaurants",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){}).then(this.setState({restaurantSaved:!0}))}},{key:"render",value:function(){if(this.props.returnedRestaurant){var e=this.props.returnedRestaurant,t={width:"300px",height:"300px",backgroundImage:"url("+e.image_url+")",backgroundSize:"cover",backgroundRepeat:"no-repeat"};return s.a.createElement("div",{className:"restaurant-info"},s.a.createElement("div",{className:"result-image",style:t},s.a.createElement("div",{className:"restaurant-text-info"},s.a.createElement("div",{className:"result-name"},e.name),s.a.createElement("div",{className:"result-category"},e.categories[0].title),s.a.createElement("div",{className:"result-price"},e.price),s.a.createElement("div",{className:"result-location"},e.location.display_address.join(" ")))),s.a.createElement("div",{className:"messages-and-buttons"},s.a.createElement("div",{className:"regenerate-message"},"Don't like your result? Click the 'Find A Feast!' button again."),s.a.createElement("div",{className:"rating-message"},"Already been here? Give it a thumbs up or thumbs down and the rating will be saved to your profile."),s.a.createElement("div",null,this.loadRatingButtons()),!0===this.state.restaurantSaved?s.a.createElement("div",{className:"saved"},"Saved!"):null))}return s.a.createElement("div",{className:"hungry-message"},"Hungry? Type in your city and state and we'll tell you where to go!")}}]),t}(r.Component);var w=Object(j.b)(function(e){return{returnedRestaurant:e.returnedRestaurant}},function(e){})(N),C=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{class:"header-component"},s.a.createElement(k,{onSignOut:this.props.onSignOut,showNavItems:this.props.authenticated})),s.a.createElement("div",{className:"restaurant-info-component"},s.a.createElement(w,null)))}}]),t}(r.Component),R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={favorites:[],selectedRestaurant:null},a.fetchRatings=function(e){fetch("/restaurants/"+e).then(function(e){return e.json()}).then(function(e){a.setState({favorites:e})})},a.removeItem=function(e){var t=a.fetchRatings;fetch("/restaurants/"+e,{method:"DELETE"}).then(function(e){console.log("Restaurant Deleted!",e),t()}).then(document.location.reload(!0))},a.moveToDislikes=function(e){console.log("sdfhlaksdjfhalskjf",e);var t=a.fetchRatings;e.rating="dislike",fetch("/restaurants",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t()}).then(document.location.reload(!0))},a.handleClick=function(e){a.setState({selectedRestaurant:e.target.textContent===a.state.selectedRestaurant?null:e.target.textContent})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchRatings("like")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"restaurant-list-bg"},s.a.createElement(b.b,{to:"/"},s.a.createElement("div",{className:"back-arrow"})),s.a.createElement("div",{className:"rating-title"},"Favorites"),s.a.createElement("div",{className:"restaurant-list"},this.state.favorites.map(function(t){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"restaurant-name",onClick:e.handleClick},t.name),t.name===e.state.selectedRestaurant?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"rating-restaurant-info"},s.a.createElement("div",null,t.genre),s.a.createElement("div",null,t.price),s.a.createElement("div",null,t.location)),s.a.createElement("div",{className:"buttons"},s.a.createElement("div",{onClick:"document.location.reload(true)"}),s.a.createElement("button",{onClick:function(){e.removeItem(t._id)},className:"button"},"Remove"),s.a.createElement("button",{onClick:function(){e.moveToDislikes(t)},className:"button"},"Move to Dislikes"))):null)})))}}]),t}(r.Component),I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={dislikes:[],selectedRestaurant:null},a.fetchRatings=function(e){fetch("/restaurants/"+e).then(function(e){return e.json()}).then(function(e){a.setState({dislikes:e})})},a.removeItem=function(e){var t=a.fetchRatings;fetch("/restaurants/"+e,{method:"DELETE"}).then(function(e){console.log("Restaurant Deleted!",e),t()}).then(document.location.reload(!0))},a.moveToLikes=function(e){console.log("sdfhlaksdjfhalskjf",e);var t=a.fetchRatings;e.rating="like",fetch("/restaurants",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t()}).then(document.location.reload(!0))},a.handleClick=function(e){a.setState({selectedRestaurant:e.target.textContent===a.state.selectedRestaurant?null:e.target.textContent})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchRatings("dislike")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"restaurant-list-bg"},s.a.createElement(b.b,{to:"/"},s.a.createElement("div",{className:"back-arrow"})),s.a.createElement("div",{className:"rating-title"},"Dislikes"),s.a.createElement("div",{className:"restaurant-list"},this.state.dislikes.map(function(t){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"restaurant-name",onClick:e.handleClick},t.name),t.name===e.state.selectedRestaurant?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"rating-restaurant-info"},s.a.createElement("div",null,t.genre),s.a.createElement("div",null,t.price),s.a.createElement("div",null,t.location)),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{onClick:function(){e.removeItem(t._id)},className:"button"},"Remove"),s.a.createElement("button",{onClick:function(){e.moveToLikes(t)},className:"button"},"Move to Likes"))):null)})))}}]),t}(r.Component),U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={signUpSignInError:"",authenticated:localStorage.getItem("token")||!1},a.handleSignUp=function(e){var t=e.username,n=e.password;e.confirmPassword;t.trim()&&n.trim()?fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var t=e.token;localStorage.setItem("token",t),a.setState({signUpSignInError:"",authenticated:t})}):a.setState({signUpSignInError:"Must Provide All Fields"})},a.handleSignIn=function(e){var t=e.username,n=e.password;t.trim()&&n.trim()?fetch("/api/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(401!==e.status)return e.json();console.log("invalid login"),a.setState({signUpSignInError:"Invalid login."})}).then(function(e){var t=e.token;localStorage.setItem("token",t),a.setState({signUpSignInError:"",authenticated:t})}):a.setState({signUpSignInError:"Must Provide All Fields"})},a.handleSignOut=function(){localStorage.removeItem("token"),a.setState({authenticated:!1})},a.renderSignUpSignIn=function(){return s.a.createElement(f,{error:a.state.signUpSignInError,onSignUp:a.handleSignUp,onSignIn:a.handleSignIn})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderApp",value:function(){var e=this;return s.a.createElement(b.a,null,s.a.createElement("div",null,s.a.createElement(E.a,{exact:!0,path:"/",component:function(){return s.a.createElement(C,{onSignOut:e.handleSignOut,authenticated:e.state.authenticated})}}),s.a.createElement(E.a,{path:"/favorites",component:R}),s.a.createElement(E.a,{path:"/dislikes",component:I})))}},{key:"render",value:function(){return this.state.authenticated?this.renderApp():this.renderSignUpSignIn()}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=a(37);var _=Object(T.c)({returnedRestaurant:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===O?t.value:e}}),A=a(121),D=window.fetch;window.fetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D(e,Object(n.a)({},t,{headers:Object(n.a)({},t.headers,{authorization:localStorage.getItem("token")})}))};var P=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):T.d)(Object(T.a)(A.a)),x=Object(T.e)(_,{returnedRestaurant:null},P);o.a.render(s.a.createElement(j.a,{store:x},s.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[122,1,2]]]);
//# sourceMappingURL=main.7fa6b3e2.chunk.js.map